<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CVisionary</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="../static/css/index.css" />
  </head>
  <body>
    <!-- Header (from activity2.html) -->
    <header class="header">
      <nav class="nav">
        <a href="/index" class="logo">
          <div class="logo-icon">
            <i class="fas fa-brain"></i>
          </div>
          CVisionary
        </a>

        <div class="nav-links">
          <a href="/features">Features</a>
          <a href="/howitworks">Workflow</a>
          <a href="/pricing">Pricing</a>
          <a href="/upload">Upload</a>
          <a href="/about-us">About Us</a>
          <!-- Removed the direct 'Activity' link -->
        </div>

        <!-- Authentication / User Menu (dynamic) -->
        <div id="auth-section" class="auth-hidden">
          <!-- Added auth-hidden class -->
          <!-- Default (unauthenticated) buttons -->
          <div class="auth-buttons" id="auth-buttons-group">
            <button class="btn btn-outline" id="login-button">Log In</button>
            <button class="btn btn-primary" id="get-started-button">
              Get Started
            </button>
          </div>

          <!-- User Menu (authenticated) - Initially hidden -->
          <div class="user-menu hidden" id="user-menu-group">
            <!-- Added id to user-info for click listener -->
            <div class="user-info" id="user-profile-link">
              <div class="user-avatar" id="header-avatar">
                <i class="fas fa-user"></i>
              </div>
              <div>
                <div style="font-weight: 600" id="header-name">Loading...</div>
                <div
                  style="font-size: 0.875rem; color: var(--gray-500)"
                  id="header-email"
                >
                  Loading...
                </div>
              </div>
            </div>
            <button class="logout-btn" id="logout-btn">
              <i class="fas fa-sign-out-alt"></i>
              Logout
            </button>
          </div>
        </div>
      </nav>
    </header>

    <section class="hero">
      <div class="container">
        <div class="hero-content">
          <p class="hero-subtitle">
            <span><i class="fas fa-bolt"></i></span> AI-POWERED RECRUITMENT
          </p>
          <h1 class="hero-title">
            Transform Your&nbsp;Resume&nbsp;Into Your Career Roadmap
          </h1>
          <p class="hero-description">
            Our intelligent platform uses advanced AI to connect the right
            talent with the right opportunities, making recruitment smarter,
            faster, and bias-free.
          </p>
          <div class="hero-features">
            <div class="hero-feature">
              <div class="hero-feature-icon">
                <i class="fas fa-robot"></i>
              </div>
              <div class="hero-feature-content">
                <h3>AI-Powered Analysis</h3>
                <p>Advanced algorithms for precise matching</p>
              </div>
            </div>
            <div class="hero-feature">
              <div class="hero-feature-icon">
                <i class="fas fa-bolt"></i>
              </div>
              <div class="hero-feature-content">
                <h3>Instant Results</h3>
                <p>Get matches in minutes, not days</p>
              </div>
            </div>
            <div class="hero-feature">
              <div class="hero-feature-icon">
                <i class="fas fa-balance-scale"></i>
              </div>
              <div class="hero-feature-content">
                <h3>Bias-Free Hiring</h3>
                <p>Fair and objective candidate evaluation</p>
              </div>
            </div>
          </div>
          <div class="hero-buttons">
            <button class="btn btn-outline" id="job-seekers-button">
              For Job Seekers <i class="fas fa-arrow-right"></i>
            </button>
          </div>
        </div>

        <div class="hero-image">
          <div class="ai-dashboard">
            <div class="dashboard-header">
              <i class="fas fa-brain"></i>
              <h3>AI Candidate Matching</h3>
            </div>
            <div class="dashboard-content">
              <div class="candidate-card">
                <div class="match-score">98%</div>
                <div class="candidate-header">
                  <div class="candidate-avatar">SA</div>
                  <div class="candidate-info">
                    <h4>Sarah Anderson</h4>
                    <p>Full Stack Developer</p>
                  </div>
                </div>
                <div class="skills-tags">
                  <span class="skill-tag">React</span>
                  <span class="skill-tag">Node.js</span>
                  <span class="skill-tag">Python</span>
                  <span class="skill-tag">AWS</span>
                </div>
              </div>

              <div class="candidate-card">
                <div class="match-score">95%</div>
                <div class="candidate-header">
                  <div class="candidate-avatar">MJ</div>
                  <div class="candidate-info">
                    <h4>Michael Johnson</h4>
                    <p>DevOps Engineer</p>
                  </div>
                </div>
                <div class="skills-tags">
                  <span class="skill-tag">Docker</span>
                  <span class="skill-tag">Kubernetes</span>
                  <span class="skill-tag">CI/CD</span>
                </div>
              </div>

              <div class="candidate-card">
                <div class="match-score">92%</div>
                <div class="candidate-header">
                  <div class="candidate-avatar">EL</div>
                  <div class="candidate-info">
                    <h4>Emma Liu</h4>
                    <p>UI/UX Designer</p>
                  </div>
                </div>
                <div class="skills-tags">
                  <span class="skill-tag">Figma</span>
                  <span class="skill-tag">Sketch</span>
                  <span class="skill-tag">Prototyping</span>
                </div>
              </div>
            </div>
          </div>

          <div class="floating-stats stat-1">
            <div class="stat-icon">
              <i class="fas fa-clock"></i>
            </div>
            <div class="stat-value">Instant</div>
            <div class="stat-label">Matching Process</div>
          </div>

          <div class="floating-stats stat-2">
            <div class="stat-icon">
              <i class="fas fa-brain"></i>
            </div>
            <div class="stat-value">Smart</div>
            <div class="stat-label">AI Screening</div>
          </div>
        </div>
      </div>
    </section>

    <section class="introduction">
      <div class="container">
        <div class="intro-content">
          <div class="intro-left">
            <div class="intro-tag">
              <span><i class="fas fa-lightbulb"></i></span>
              REVOLUTIONIZING RECRUITMENT
            </div>
            <h2 class="intro-title">Your AI-Powered Career Companion</h2>
            <p class="intro-description">
              CVisionary is a cutting-edge, AI-powered web platform designed to
              revolutionize how individuals create, refine, and utilize their
              CVs in the modern job market. The system uses advanced natural
              language processing models—most notably the Gemini 2.0 API—to
              analyze unstructured resume data, extract key information like
              skills, education, and work experience, and present it in a
              structured format. From this data, CVisionary provides two main
              features: personalized job recommendations that align with the
              user’s background, and intelligent suggestions to improve the
              quality and impact of their CV. By combining AI resume parsing
              with career guidance, CVisionary acts as a digital career coach
              available to every job seeker.
            </p>
          </div>

          <div class="intro-right">
            <div class="problem-solution">
              <div class="problem-card">
                <div class="card-header">
                  <i class="fas fa-exclamation-triangle"></i>
                  <h3>The Problem</h3>
                </div>
                <ul class="problem-list">
                  <li>
                    The job-hunting process remains overwhelming for many, especially those lacking access to professional CV writers or career advisors.
                  </li>
                  <li>Many applicants send generic CVs to every job opening without realizing that tailoring their application significantly increases their chances.</li>
                  <li>Navigating job boards to find roles that match one’s experience and aspirations can be inefficient and confusing.</li>
                  <li>Traditional CV review services are often expensive, localized, or impersonal.</li>
                  <li>CVisionary seeks to solve these problems by automating:
                    <ul>
                      <li>CV analysis</li>
                      <li>Job matching</li>
                      <li>Optimization feedback</li>
                    </ul>
                  </li>
                  <li>It makes the job search faster, cheaper, and more effective for users to land the right job.</li>
                  <li>The goal is to improve the employment experience for everyone—from recent graduates to experienced professionals—by making high-quality career support accessible through intelligent technology.</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="how-it-works">
      <div class="container">
        <div class="section-title-wrapper">
          <span class="section-tag">SIMPLE PROCESS</span>
          <h2 class="section-title">How CVisionary Works</h2>
          <p class="section-description">
            Our platform simplifies the recruitment process with just a few easy
            steps to connect employers with qualified candidates.
          </p>
        </div>

        <div class="steps">
          <div class="step">
            <div class="step-number">1</div>
            <div class="step-icon"><i class="fas fa-upload"></i></div>
            <h3 class="step-title">Upload Resume/Job</h3>
            <p class="step-description">
              Upload your resume as a job seeker or post your job opening as an
              employer. Our AI will analyze the content automatically.
            </p>
            <div class="step-connector"></div>
          </div>

          <div class="step">
            <div class="step-number">2</div>
            <div class="step-icon"><i class="fas fa-brain"></i></div>
            <h3 class="step-title">AI Analysis</h3>
            <p class="step-description">
              Our advanced algorithms analyze skills, experience, job
              requirements, and company culture to identify potential matches.
            </p>
            <div class="step-connector"></div>
          </div>

          <div class="step">
            <div class="step-number">3</div>
            <div class="step-icon"><i class="fas fa-handshake"></i></div>
            <h3 class="step-title">Connect & Hire</h3>
            <p class="step-description">
              Review your matches, connect with potential candidates or
              employers, and streamline the hiring process.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section class="features">
      <div class="container">
        <div class="section-title-wrapper">
          <span class="section-tag">SMART FEATURES</span>
          <h2 class="section-title">How Our AI Works For You</h2>
          <p class="section-description">
            Our cutting-edge AI analyzes resumes and job descriptions to find
            the perfect matches, saving time and improving hiring outcomes.
          </p>
        </div>

        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-search"></i>
            </div>
            <h3 class="feature-title">Smart Resume Analysis</h3>
            <p class="feature-description">
              Our AI analyzes resumes to extract skills, experience, and
              qualifications with 95% accuracy, eliminating manual screening.
            </p>
            <a href="#" class="feature-link"
              >Learn more <i class="fas fa-arrow-right"></i
            ></a>
          </div>

          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-briefcase"></i>
            </div>
            <h3 class="feature-title">Job Matching</h3>
            <p class="feature-description">
              Our AI matches candidates with job openings based on skills and
              experience, ensuring the best fit for both parties.
            </p>
            <a href="#" class="feature-link"
              >Learn more <i class="fas fa-arrow-right"></i
            ></a>
          </div>

          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-chart-line"></i>
            </div>
            <h3 class="feature-title">Performance Analytics</h3>
            <p class="feature-description">
              Get insights into your hiring process with our analytics
              dashboard, helping you make data-driven decisions.
            </p>
            <a href="#" class="feature-link"
              >Learn more <i class="fas fa-arrow-right"></i
            ></a>
          </div>

          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-users"></i>
            </div>
            <h3 class="feature-title">Team Collaboration</h3>
            <p class="feature-description">
              Collaborate with your team in real-time, share feedback, and make
              hiring decisions together.
            </p>
            <a href="#" class="feature-link"
              >Learn more <i class="fas fa-arrow-right"></i
            ></a>
          </div>

          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-shield-alt"></i>
            </div>
            <h3 class="feature-title">Data Security</h3>
            <p class="feature-description">
              We prioritize your data security with end-to-end encryption and
              compliance with GDPR regulations.
            </p>
            <a href="#" class="feature-link"
              >Learn more <i class="fas fa-arrow-right"></i
            ></a>
          </div>

          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-headset"></i>
            </div>
            <h3 class="feature-title">24/7 Support</h3>
            <p class="feature-description">
              Our support team is available 24/7 to assist you with any
              questions or issues you may have.
            </p>
            <a href="#" class="feature-link"
              >Learn more <i class="fas fa-arrow-right"></i
            ></a>
          </div>
        </div>
      </div>
    </section>

    <section class="cta">
      <div class="container">
        <div class="cta-content">
          <h2 class="cta-title">Ready to Transform Your Hiring?</h2>
          <p class="cta-description">
            Join thousands of companies and job seekers who are using AI to make
            better matches and build successful teams.
          </p>
          <div class="cta-buttons">
            <button class="btn btn-light btn-with-icon">
              Get Started Free <i class="fas fa-arrow-right"></i>
            </button>
            <button class="btn btn-outline-light">Request Demo</button>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="container">
        <div class="footer-grid">
          <div>
            <div class="footer-logo">
              <div class="footer-logo-icon">
                <i class="fas fa-brain"></i>
              </div>
              CVisionary
            </div>
            <p class="footer-description">
              Using artificial intelligence to revolutionize how talent and
              opportunities connect, making recruitment smarter, faster, and
              more effective.
            </p>
            <div class="social-icons">
              <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
              <a href="#" class="social-icon"
                ><i class="fab fa-linkedin-in"></i
              ></a>
              <a href="#" class="social-icon"
                ><i class="fab fa-facebook-f"></i
              ></a>
              <a href="#" class="social-icon"
                ><i class="fab fa-instagram"></i
              ></a>
            </div>
          </div>

          <div>
            <h3 class="footer-heading">Product</h3>
            <div class="footer-links">
              <a href="#">Features</a>
              <a href="#">Pricing</a>
              <a href="#">Case Studies</a>
              <a href="#">Reviews</a>
              <a href="#">Updates</a>
            </div>
          </div>

          <div>
            <h3 class="footer-heading">Company</h3>
            <div class="footer-links">
              <a href="#">About Us</a>
              <a href="#">Careers</a>
              <a href="#">Blog</a>
              <a href="#">Press</a>
              <a href="#">Contact</a>
            </div>
          </div>

          <div>
            <h3 class="footer-heading">Resources</h3>
            <div class="footer-links">
              <a href="#">Support</a>
              <a href="#">Documentation</a>
              <a href="#">API</a>
              <a href="#">Community</a>
              <a href="#">Partners</a>
            </div>
          </div>
        </div>

        <div class="footer-bottom">
          <p>© 2025 CVisionary AI. All rights reserved.</p>
          <div class="footer-bottom-links">
            <a href="#">Privacy Policy</a>
            <a href="#">Terms of Service</a>
            <a href="#">Cookie Policy</a>
            <a href="#">Sitemap</a>
          </div>
        </div>
      </div>
    </footer>

    <!-- Firebase and Authentication Scripts -->
    <script type="module">
      // Import Firebase modules
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
      import {
        getAuth,
        onAuthStateChanged,
        signOut,
      } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
      import {
        getFirestore,
        doc,
        getDoc,
        setDoc, // Import setDoc for creating initial user doc
        updateDoc, // Import updateDoc for updating user data
      } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

      // Firebase configuration (using the one from activity2.html)
      const firebaseConfig = {
        apiKey: "AIzaSyCyw-l5jQMZS77ZUcgLEY3GnbJmZyFZ_mY",
        authDomain: "authenticate1-ec031.firebaseapp.com",
        projectId: "authenticate1-ec031",
        storageBucket: "authenticate1-ec031.firebasestorage.app",
        messagingSenderId: "259315058735",
        appId: "1:259315058735:web:cc77ae09101c38f26e1eda",
        measurementId: "G-2GVD4YQWEP",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth();
      const db = getFirestore();

      // Global variable to store user data
      let currentUserData = null;

      // Utility Functions (from activity2.html)
      function getInitials(name) {
        if (!name) return "U";
        return name
          .split(" ")
          .map((word) => word.charAt(0))
          .join("")
          .toUpperCase()
          .slice(0, 2);
      }

      // Function to load user profile from Firestore
      async function loadUserProfile(user) {
        console.log("loadUserProfile: User object received:", user);
        try {
          const userDocRef = doc(db, "users", user.uid);
          const userDocSnap = await getDoc(userDocRef);

          if (userDocSnap.exists()) {
            currentUserData = userDocSnap.data();
            console.log(
              "loadUserProfile: User data from Firestore:",
              currentUserData
            );
          } else {
            // If user document doesn't exist, create a basic one
            currentUserData = {
              name: user.displayName || "User",
              email: user.email,
              role: "user",
              createdAt: new Date(), // Using client-side timestamp for new doc
              lastLogin: new Date(),
              loginCount: 1,
            };
            await setDoc(userDocRef, currentUserData); // Use setDoc for initial creation
            console.log(
              "loadUserProfile: Created new user document:",
              currentUserData
            );
          }
          // Update last login (can also increment login count here if desired)
          await updateDoc(userDocRef, {
            lastLogin: new Date(), // Using client-side timestamp for updates
            loginCount: (currentUserData.loginCount || 0) + 1,
          });
          console.log(
            "loadUserProfile: User data updated with lastLogin/loginCount."
          );

          updateHeaderUI(); // Update the header after fetching/updating data
        } catch (error) {
          console.error("Error loading user profile:", error);
          // Handle error, maybe show a generic "User" name
          document.getElementById("header-name").textContent = "User";
          document.getElementById("header-email").textContent = "Error";
          document.getElementById("header-avatar").textContent = "U";
        }
      }

      // Function to update the header UI based on user data
      function updateHeaderUI() {
        console.log("updateHeaderUI: Current User Data:", currentUserData);
        const authSection = document.getElementById("auth-section");
        const userMenu = document.getElementById("user-menu-group");
        const authButtons = document.getElementById("auth-buttons-group");

        if (currentUserData) {
          const initials = getInitials(
            currentUserData.name || currentUserData.email
          );
          document.getElementById("header-avatar").textContent = initials;
          document.getElementById("header-name").textContent =
            currentUserData.name || "User";
          document.getElementById("header-email").textContent =
            currentUserData.email;

          // Show user menu, hide auth buttons
          userMenu.classList.remove("hidden");
          authButtons.classList.add("hidden");
          console.log(
            "updateHeaderUI: Showing user menu, hiding auth buttons."
          );
        } else {
          // Hide user menu, show auth buttons
          userMenu.classList.add("hidden");
          authButtons.classList.remove("hidden");
          console.log(
            "updateHeaderUI: Hiding user menu, showing auth buttons."
          );
        }
        // Finally, make the entire auth section visible
        authSection.classList.add("auth-visible");
        authSection.classList.remove("auth-hidden");
        console.log("updateHeaderUI: Auth section made visible.");
      }

      // Logout Function
      async function logout() {
        try {
          await signOut(auth);
          currentUserData = null; // Clear local user data
          updateHeaderUI(); // Update UI to show login/signup buttons
          console.log("User logged out successfully.");
          // Optionally redirect to login page after logout
          // window.location.href = "login-signup.html";
        } catch (error) {
          console.error("Error logging out:", error);
          // You might want to display a non-alert message to the user here
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        // Add scroll animation for header
        window.addEventListener("scroll", function () {
          const header = document.querySelector(".header"); /* Use .header */
          if (window.scrollY > 10) {
            header.style.boxShadow = "var(--shadow)";
            header.style.background = "rgba(255, 255, 255, 0.98)";
          } else {
            header.style.boxShadow = "var(--shadow-sm)";
            header.style.background = "white";
          }
        });

        // Get the buttons and user profile link from the main page
        const loginButton = document.getElementById("login-button");
        const getStartedButton = document.getElementById("get-started-button");
        const logoutButton = document.getElementById("logout-btn");
        const userProfileLink = document.getElementById("user-profile-link"); // New element for clicking profile
        const jobSeekersButton = document.getElementById("job-seekers-button"); // Get the new job seekers button

        // Flask navigation - replace your existing event listeners with these:

        if (loginButton) {
          loginButton.addEventListener("click", function () {
            console.log("Login button clicked!");
            window.location.href = "/login-signup";
          });
        } else {
          console.log("Login button not found!");
        }

        if (getStartedButton) {
          getStartedButton.addEventListener("click", function () {
            console.log("Get Started button clicked!");
            window.location.href = "/login-signup?tab=signup";
          });
        } else {
          console.log("Get Started button not found!");
        }

        if (logoutButton) {
          logoutButton.addEventListener("click", logout);
        }

        // Add click listener to the user profile section
        if (userProfileLink) {
          userProfileLink.addEventListener("click", function () {
            window.location.href = "/activity2"; // Navigate to the activity page
          });
        }

        // Add click listener for "For Job Seekers" button
        if (jobSeekersButton) {
          jobSeekersButton.addEventListener("click", function () {
            window.location.href = "/upload"; // Navigate to upload.html
          });
        }

        // Authentication State Observer
        onAuthStateChanged(auth, async (user) => {
          console.log(
            "onAuthStateChanged: Authentication state changed. User:",
            user
          );
          if (user) {
            // User is signed in
            await loadUserProfile(user); // Load profile and update UI
          } else {
            // User is signed out
            currentUserData = null; // Clear user data
            updateHeaderUI(); // Update UI to show login/signup buttons
          }
        });

        // On the login/signup page, check if we should show signup tab
        // This part is for the login-signup.html page, not strictly for index2.html
        // Keeping it here for completeness if this JS block is shared, but it
        // won't execute on index2.html as the elements aren't present.
        const urlParams = new URLSearchParams(window.location.search);
        const activeTab = urlParams.get("tab");

        if (activeTab === "signup") {
          const loginTab = document.getElementById("/login-tab");
          const signupTab = document.getElementById("/signup-tab");

          if (loginTab && signupTab) {
            loginTab.classList.remove("active");
            signupTab.classList.add("active");

            const loginForm = document.querySelector("/.login-form-content");
            const signupForm = document.querySelector("/.signup-form-content");

            if (loginForm && signupForm) {
              loginForm.style.display = "none";
              signupForm.style.display = "block";
            }
          }
        }
      });
    </script>
  </body>
</html>
