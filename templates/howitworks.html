<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>How It Works - CVisionary</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="../static/css/howitworks.css" />
  </head>
  <body>
    <!-- Header (Integrated from index2.html logic) -->
    <header class="header">
      <nav class="nav">
        <a href="/index" class="logo">
          <div class="logo-icon">
            <i class="fas fa-brain"></i>
          </div>
          CVisionary
        </a>

        <div class="nav-links">
          <a href="/features">Features</a>
          <a href="/howitworks" class="active">Workflow</a>
          <a href="/pricing">Pricing</a>
          <a href="/upload">Upload</a>
          <a href="/about-us">About Us</a>
        </div>

        <!-- Authentication / User Menu (dynamic) -->
        <div id="auth-section" class="auth-hidden">
          <!-- Default (unauthenticated) buttons -->
          <div class="auth-buttons" id="auth-buttons-group">
            <button class="btn btn-outline" id="login-button">Log In</button>
            <button class="btn btn-primary" id="get-started-button">
              Get Started
            </button>
          </div>

          <!-- User Menu (authenticated) - Initially hidden -->
          <div class="user-menu hidden" id="user-menu-group">
            <div class="user-info" id="user-profile-link">
              <div class="user-avatar" id="header-avatar">
                <i class="fas fa-user"></i>
              </div>
              <div>
                <div style="font-weight: 600" id="header-name">Loading...</div>
                <div
                  style="font-size: 0.875rem; color: var(--gray-500)"
                  id="header-email"
                >
                  Loading...
                </div>
              </div>
            </div>
            <button class="logout-btn" id="logout-btn">
              <i class="fas fa-sign-out-alt"></i>
              Logout
            </button>
          </div>
        </div>
      </nav>
    </header>

    <section class="page-header">
      <div class="container">
        <div class="page-header-content">
          <p class="page-subtitle">Our process</p>
          <h1 class="page-title">How CVisionary Works</h1>
          <p class="page-description">
            Our AI-powered platform transforms recruitment through intelligent
            matching, making it easier for job seekers and employers to find
            their perfect match.
          </p>
        </div>
      </div>
    </section>

    <section class="process-section">
      <div class="container">
        <div class="section-title-wrapper">
          <span class="section-tag">THE PROCESS</span>
          <h2 class="section-title">Our Simple Yet Powerful Approach</h2>
          <p class="section-description">
            CVisionary uses advanced AI algorithms to analyze resumes and job
            postings, creating meaningful connections between talent and
            opportunities.
          </p>
        </div>

        <div class="process-timeline">
          <div class="timeline-line"></div>

          <div class="timeline-item">
            <div class="timeline-content">
              <div class="timeline-icon"><i class="fas fa-upload"></i></div>
              <h3 class="timeline-title">Submit Your Information</h3>
              <p class="timeline-description">
                Job seekers upload their resume, while employers create detailed
                job postings. Our platform accepts various formats and makes it
                easy to input your information.
              </p>
              <div class="timeline-features">
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>Multiple file format support (PDF, DOCX, TXT)</div>
                </div>
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>Easy-to-use interface for job posting creation</div>
                </div>
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>Profile synchronization with LinkedIn</div>
                </div>
              </div>
            </div>
            <div class="timeline-number">1</div>
          </div>

          <div class="timeline-item">
            <div class="timeline-content">
              <div class="timeline-icon"><i class="fas fa-brain"></i></div>
              <h3 class="timeline-title">AI Analysis & Processing</h3>
              <p class="timeline-description">
                Our sophisticated AI algorithms analyze the submitted
                information, extracting key details, skills, experience, and
                even contextual understanding of roles and requirements.
              </p>
              <div class="timeline-features">
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>
                    Natural Language Processing for context understanding
                  </div>
                </div>
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>Skill extraction with 95% accuracy</div>
                </div>
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>Industry-specific knowledge base</div>
                </div>
              </div>
            </div>
            <div class="timeline-number">2</div>
          </div>

          <div class="timeline-item">
            <div class="timeline-content">
              <div class="timeline-icon">
                <i class="fas fa-puzzle-piece"></i>
              </div>
              <h3 class="timeline-title">Smart Matching</h3>
              <p class="timeline-description">
                Our platform matches candidates with job opportunities based on
                skills, experience, and cultural fit, providing percentage-based
                match scores for transparency.
              </p>
              <div class="timeline-features">
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>Multi-dimensional matching criteria</div>
                </div>
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>Transparent match percentage scoring</div>
                </div>
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>Continuous learning from feedback loops</div>
                </div>
              </div>
            </div>
            <div class="timeline-number">3</div>
          </div>

          <div class="timeline-item">
            <div class="timeline-content">
              <div class="timeline-icon"><i class="fas fa-comments"></i></div>
              <h3 class="timeline-title">Connect & Communicate</h3>
              <p class="timeline-description">
                When a strong match is found, both parties are notified and can
                initiate communication through our secure platform, streamlining
                the initial recruitment process.
              </p>
              <div class="timeline-features">
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>Secure in-platform messaging</div>
                </div>
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>Interview scheduling tools</div>
                </div>
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>Video interview integration</div>
                </div>
              </div>
            </div>
            <div class="timeline-number">4</div>
          </div>

          <div class="timeline-item">
            <div class="timeline-content">
              <div class="timeline-icon"><i class="fas fa-chart-line"></i></div>
              <h3 class="timeline-title">Track & Optimize</h3>
              <p class="timeline-description">
                Our platform provides detailed analytics and insights to help
                both job seekers and employers optimize their approach and
                improve future matching outcomes.
              </p>
              <div class="timeline-features">
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>Performance dashboards</div>
                </div>
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>Skill gap analysis</div>
                </div>
                <div class="timeline-feature">
                  <div class="timeline-feature-icon">
                    <i class="fas fa-check-circle"></i>
                  </div>
                  <div>Recruitment process optimization</div>
                </div>
              </div>
            </div>
            <div class="timeline-number">5</div>
          </div>
        </div>
      </div>
    </section>

    <section class="benefits-section">
      <div class="container">
        <div class="section-title-wrapper">
          <span class="section-tag">BENEFITS</span>
          <h2 class="section-title">Why Choose CVisionary</h2>
          <p class="section-description">
            Our platform delivers tangible benefits for both job seekers and
            employers, transforming the recruitment experience for everyone
            involved.
          </p>
        </div>

        <div class="benefits-grid">
          <div class="benefit-card">
            <div class="benefit-icon">
              <i class="fas fa-bolt"></i>
            </div>
            <h3 class="benefit-title">Time Efficiency</h3>
            <p class="benefit-description">
              Reduce your time-to-hire by up to 50% with our AI-powered matching
              system that quickly identifies suitable candidates and
              opportunities without endless searching.
            </p>
          </div>

          <div class="benefit-card">
            <div class="benefit-icon">
              <i class="fas fa-bullseye"></i>
            </div>
            <h3 class="benefit-title">Precision Matching</h3>
            <p class="benefit-description">
              Our advanced algorithms go beyond keyword matching to understand
              context, resulting in higher-quality connections and better
              long-term fit.
            </p>
          </div>

          <div class="benefit-card">
            <div class="benefit-icon">
              <i class="fas fa-chart-bar"></i>
            </div>
            <h3 class="benefit-title">Data-Driven Insights</h3>
            <p class="benefit-description">
              Gain valuable analytics and feedback to continuously improve your
              recruitment strategy or job-seeking approach.
            </p>
          </div>

          <div class="benefit-card">
            <div class="benefit-icon">
              <i class="fas fa-shield-alt"></i>
            </div>
            <h3 class="benefit-title">Secure & Private</h3>
            <p class="benefit-description">
              Your data is protected with enterprise-grade security protocols,
              ensuring confidentiality throughout the recruitment process.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section class="challenges-solutions">
      <div class="container">
        <div class="section-header">
          <div class="section-tag">
            TECHNICAL CHALLENGES
          </div>
          <h2 class="section-title">Challenges We're Solving</h2>
          <p class="section-description">
            CVisionary addresses critical challenges in AI-powered recruitment
            through innovative solutions
          </p>
        </div>

        <div class="comparison-table">
          <div class="table-header">
            <div class="header-cell challenge-header">
              <i class="fas fa-exclamation-triangle"></i>
              <h3>Challenges</h3>
            </div>
            <div class="header-cell solution-header">
              <i class="fas fa-lightbulb"></i>
              <h3>Our Solutions</h3>
            </div>
          </div>

          <div class="table-body">
            <div class="table-row">
              <div class="table-cell challenge-cell">
                <div class="cell-icon">
                  <i class="fas fa-file-alt"></i>
                </div>
                <div class="cell-content">
                  <h4>Non-standard resume formats</h4>
                  <p>Diverse layouts make data extraction inconsistent</p>
                </div>
              </div>
              <div class="table-cell solution-cell">
                <div class="cell-icon">
                  <i class="fas fa-robot"></i>
                </div>
                <div class="cell-content">
                  <h4>Flexible AI-based parsing</h4>
                  <p>
                    Trained on a variety of formats for robust resume analysis
                  </p>
                </div>
              </div>
            </div>

            <div class="table-row">
              <div class="table-cell challenge-cell">
                <div class="cell-icon">
                  <i class="fas fa-balance-scale"></i>
                </div>
                <div class="cell-content">
                  <h4>Bias in training data</h4>
                  <p>
                    Historical biases may affect fairness in recommendations
                  </p>
                </div>
              </div>
              <div class="table-cell solution-cell">
                <div class="cell-icon">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <div class="cell-content">
                  <h4>Fairness-aware algorithms</h4>
                  <p>
                    Designed to minimize bias using diverse training datasets
                  </p>
                </div>
              </div>
            </div>

            <div class="table-row">
              <div class="table-cell challenge-cell">
                <div class="cell-icon">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div class="cell-content">
                  <h4>Dynamic job market trends</h4>
                  <p>
                    Rapid changes in skills and roles can make models outdated
                  </p>
                </div>
              </div>
              <div class="table-cell solution-cell">
                <div class="cell-icon">
                  <i class="fas fa-sync-alt"></i>
                </div>
                <div class="cell-content">
                  <h4>Real-time job data integration</h4>
                  <p>Keeps recommendations relevant and up to date</p>
                </div>
              </div>
            </div>

            <div class="table-row">
              <div class="table-cell challenge-cell">
                <div class="cell-icon">
                  <i class="fas fa-search"></i>
                </div>
                <div class="cell-content">
                  <h4>Lack of contextual understanding</h4>
                  <p>
                    Simple keyword matching often misses transferable skills
                  </p>
                </div>
              </div>
              <div class="table-cell solution-cell">
                <div class="cell-icon">
                  <i class="fas fa-brain"></i>
                </div>
                <div class="cell-content">
                  <h4>Semantic analysis</h4>
                  <p>Deep learning models analyze content beyond keywords</p>
                </div>
              </div>
            </div>

            <div class="table-row">
              <div class="table-cell challenge-cell">
                <div class="cell-icon">
                  <i class="fas fa-globe"></i>
                </div>
                <div class="cell-content">
                  <h4>Language and regional limitations</h4>
                  <p>
                    Most systems only support English and lack localized results
                  </p>
                </div>
              </div>
              <div class="table-cell solution-cell">
                <div class="cell-icon">
                  <i class="fas fa-language"></i>
                </div>
                <div class="cell-content">
                  <h4>Multilingual and regional expansion</h4>
                  <p>
                    Broader support for users worldwide with localized features
                  </p>
                </div>
              </div>
            </div>

            <div class="table-row">
              <div class="table-cell challenge-cell">
                <div class="cell-icon">
                  <i class="fas fa-exclamation-circle"></i>
                </div>
                <div class="cell-content">
                  <h4>Variable input quality</h4>
                  <p>
                    Poorly structured CVs hinder system performance and accuracy
                  </p>
                </div>
              </div>
              <div class="table-cell solution-cell">
                <div class="cell-icon">
                  <i class="fas fa-comments"></i>
                </div>
                <div class="cell-content">
                  <h4>CV quality feedback</h4>
                  <p>
                    Real-time suggestions guide users to provide better
                    structured CVs
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="use-case">
      <div class="container">
        <div class="section-header">
          <div class="section-tag">
            USE CASE
          </div>
          <h2 class="section-title">Intelligent Career Enhancement Platform</h2>
          <p class="section-description">
            Discover how CVisionary transforms career development through
            AI-powered resume analysis and intelligent job matching
          </p>
        </div>

        <div class="use-case-content">
          <div class="purpose-section">
            <div class="section-icon">
              <i class="fas fa-bullseye"></i>
            </div>
            <div class="section-text">
              <h3>Purpose & Vision</h3>
              <p>
                The purpose of CVisionary is to provide an intelligent,
                automated system that supports users in enhancing their career
                potential through AI-powered resume analysis and targeted job
                matching. The platform is designed to assist users in
                identifying gaps in their resumes, aligning their profiles with
                market demands, and discovering relevant employment
                opportunities without manual searching or third-party
                intervention.
              </p>
              <p>
                The system enables users to upload their resumes, which are then
                analyzed using natural language processing techniques. Based on
                the extracted information—such as skills, qualifications, and
                work history—the platform generates job recommendations from
                up-to-date databases. Additionally, it provides detailed
                suggestions to improve the structure, formatting, and content of
                the CV for better visibility and alignment with employer
                expectations.
              </p>
              <p>
                CVisionary streamlines the job-seeking process by minimizing
                guesswork, reducing dependency on traditional career services,
                and delivering precise, data-driven insights. It ensures that
                each resume submitted by the user is not only technically
                optimized but also strategically aligned with the evolving needs
                of the job market.
              </p>
            </div>
          </div>

          <div class="impact-section">
            <div class="impact-content">
              <div class="impact-icon">
                <i class="fas fa-award"></i>
              </div>
              <div class="impact-text">
                <h3>Real-World AI Implementation</h3>
                <p>
                  This use case reflects a practical implementation of
                  artificial intelligence in career development, with clear
                  benefits in terms of <strong>speed</strong>,
                  <strong>personalization</strong>, and
                  <strong>efficiency</strong>. CVisionary represents a
                  comprehensive solution that bridges the gap between job
                  seekers and market opportunities through intelligent
                  automation.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="faq-section">
      <div class="container">
        <div class="section-title-wrapper">
          <span class="section-tag">FAQ</span>
          <h2 class="section-title">Common Questions</h2>
          <p class="section-description">
            Find answers to frequently asked questions about our platform and
            how it works.
          </p>
        </div>

        <div class="faq-list">
          <div class="faq-item">
            <div class="faq-question">
              How does CVisionary's AI technology work?
              <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
              <div class="faq-answer-content">
                Our AI technology uses a combination of natural language
                processing, machine learning, and proprietary algorithms to
                analyze resumes and job descriptions. It extracts key
                information such as skills, experience, and qualifications, then
                creates multi-dimensional profiles for matching. The system
                continuously learns from feedback and outcomes to improve
                matching accuracy over time.
              </div>
            </div>
          </div>

          <div class="faq-item">
            <div class="faq-question">
              Is my data secure on your platform?
              <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
              <div class="faq-answer-content">
                Absolutely. We implement enterprise-grade security measures
                including end-to-end encryption, secure data storage, and strict
                access controls. We comply with all relevant data protection
                regulations including GDPR and CCPA. Your data is never sold to
                third parties and is only used for the purposes you authorize.
              </div>
            </div>
          </div>

          <div class="faq-item">
            <div class="faq-question">
              How much does it cost to use CVisionary?
              <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
              <div class="faq-answer-content">
                We offer tiered pricing plans for both job seekers and
                employers. Job seekers can access basic features for free, with
                premium options available starting at $12.99/month. For
                employers, we offer plans based on company size and hiring
                volume, starting at $99/month for small businesses. Visit our
                pricing page for detailed information and enterprise options.
              </div>
            </div>
          </div>

          <div class="faq-item">
            <div class="faq-question">
              Can I integrate CVisionary with my existing HR systems?
              <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
              <div class="faq-answer-content">
                Yes, we offer robust API integrations with popular HRIS and ATS
                platforms including Workday, SAP SuccessFactors, Oracle HCM,
                BambooHR, Greenhouse, and more. Our development team can also
                work with you to create custom integrations for your specific
                systems if needed.
              </div>
            </div>
          </div>

          <div class="faq-item">
            <div class="faq-question">
              How accurate is the matching algorithm?
              <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
              <div class="faq-answer-content">
                Our matching algorithm achieves over 85% accuracy in predicting
                successful job matches, based on post-hire performance and
                retention metrics. We continuously refine our algorithms using
                machine learning and feedback loops to improve accuracy. For
                skills extraction specifically, our system maintains a 95%
                accuracy rate across all industries.
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="cta">
      <div class="container">
        <div class="cta-content">
          <h2 class="cta-title">Ready to Transform Your Recruitment?</h2>
          <p class="cta-description">
            Join thousands of companies and job seekers who are already
            benefiting from our AI-powered recruitment platform.
          </p>
          <div class="cta-buttons">
            <button class="btn btn-light">Get Started Free</button>
            <button class="btn btn-outline-light">Schedule a Demo</button>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="container">
        <div class="footer-grid">
          <div>
            <div class="footer-logo">
              <div class="footer-logo-icon">
                <i class="fas fa-brain"></i>
              </div>
              CVisionary
            </div>
            <p class="footer-description">
              Transforming recruitment with AI-powered matching to connect the
              right talent with the right opportunities.
            </p>
            <div class="social-icons">
              <a href="#" class="social-icon"
                ><i class="fab fa-linkedin-in"></i
              ></a>
              <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
              <a href="#" class="social-icon"
                ><i class="fab fa-facebook-f"></i
              ></a>
              <a href="#" class="social-icon"
                ><i class="fab fa-instagram"></i
              ></a>
            </div>
          </div>

          <div>
            <h3 class="footer-heading">Product</h3>
            <div class="footer-links">
              <a href="#">Features</a>
              <a href="#">How It Works</a>
              <a href="#">Pricing</a>
              <a href="#">Case Studies</a>
              <a href="#">Testimonials</a>
            </div>
          </div>

          <div>
            <h3 class="footer-heading">Resources</h3>
            <div class="footer-links">
              <a href="#">Blog</a>
              <a href="#">Help Center</a>
              <a href="#">API Documentation</a>
              <a href="#">Guides</a>
              <a href="#">Webinars</a>
            </div>
          </div>

          <div>
            <h3 class="footer-heading">Company</h3>
            <div class="footer-links">
              <a href="#">About Us</a>
              <a href="#">Careers</a>
              <a href="#">Contact</a>
              <a href="#">Partners</a>
              <a href="#">News</a>
            </div>
          </div>
        </div>

        <div class="footer-bottom">
          <p>© 2025 CVisionary. All rights reserved.</p>
          <div class="footer-bottom-links">
            <a href="#">Privacy Policy</a>
            <a href="#">Terms of Service</a>
            <a href="#">Cookies</a>
            <a href="#">Sitemap</a>
          </div>
        </div>
      </div>
    </footer>

    <!-- Firebase and Authentication Scripts (Copied from index2.html) -->
    <script type="module">
      // Import Firebase modules
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
      import {
        getAuth,
        onAuthStateChanged,
        signOut,
      } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
      import {
        getFirestore,
        doc,
        getDoc,
        setDoc, // Import setDoc for creating initial user doc
        updateDoc, // Import updateDoc for updating user data
      } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

      // Firebase configuration (using the one from activity2.html)
      const firebaseConfig = {
        apiKey: "AIzaSyCyw-l5jQMZS77ZUcgLEY3GnbJmZyFZ_mY",
        authDomain: "authenticate1-ec031.firebaseapp.com",
        projectId: "authenticate1-ec031",
        storageBucket: "authenticate1-ec031.firebasestorage.app",
        messagingSenderId: "259315058735",
        appId: "1:259315058735:web:cc77ae09101c38f26e1eda",
        measurementId: "G-2GVD4YQWEP",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth();
      const db = getFirestore();

      // Global variable to store user data
      let currentUserData = null;

      // Utility Functions
      function getInitials(name) {
        if (!name) return "U";
        return name
          .split(" ")
          .map((word) => word.charAt(0))
          .join("")
          .toUpperCase()
          .slice(0, 2);
      }

      // Function to load user profile from Firestore
      async function loadUserProfile(user) {
        console.log("loadUserProfile: User object received:", user);
        try {
          const userDocRef = doc(db, "users", user.uid);
          const userDocSnap = await getDoc(userDocRef);

          if (userDocSnap.exists()) {
            currentUserData = userDocSnap.data();
            console.log(
              "loadUserProfile: User data from Firestore:",
              currentUserData
            );
          } else {
            // If user document doesn't exist, create a basic one
            currentUserData = {
              name: user.displayName || "User",
              email: user.email,
              role: "user",
              createdAt: new Date(),
              lastLogin: new Date(),
              loginCount: 1,
            };
            await setDoc(userDocRef, currentUserData); // Use setDoc for initial creation
            console.log(
              "loadUserProfile: Created new user document:",
              currentUserData
            );
          }
          // Update last login (can also increment login count here if desired)
          await updateDoc(userDocRef, {
            lastLogin: new Date(),
            loginCount: (currentUserData.loginCount || 0) + 1,
          });
          console.log(
            "loadUserProfile: User data updated with lastLogin/loginCount."
          );

          updateHeaderUI(); // Update the header after fetching/updating data
        } catch (error) {
          console.error("Error loading user profile:", error);
          // Handle error, maybe show a generic "User" name
          document.getElementById("header-name").textContent = "User";
          document.getElementById("header-email").textContent = "Error";
          document.getElementById("header-avatar").textContent = "U";
        }
      }

      // Function to update the header UI based on user data
      function updateHeaderUI() {
        console.log("updateHeaderUI: Current User Data:", currentUserData);
        const authSection = document.getElementById("auth-section");
        const userMenu = document.getElementById("user-menu-group");
        const authButtons = document.getElementById("auth-buttons-group");

        if (currentUserData) {
          const initials = getInitials(
            currentUserData.name || currentUserData.email
          );
          document.getElementById("header-avatar").textContent = initials;
          document.getElementById("header-name").textContent =
            currentUserData.name || "User";
          document.getElementById("header-email").textContent =
            currentUserData.email;

          // Show user menu, hide auth buttons
          userMenu.classList.remove("hidden");
          authButtons.classList.add("hidden");
          console.log(
            "updateHeaderUI: Showing user menu, hiding auth buttons."
          );
        } else {
          // Hide user menu, show auth buttons
          userMenu.classList.add("hidden");
          authButtons.classList.remove("hidden");
          console.log(
            "updateHeaderUI: Hiding user menu, showing auth buttons."
          );
        }
        // Finally, make the entire auth section visible
        authSection.classList.add("auth-visible");
        authSection.classList.remove("auth-hidden");
        console.log("updateHeaderUI: Auth section made visible.");
      }

      // Logout Function
      async function logout() {
        try {
          await signOut(auth);
          currentUserData = null; // Clear local user data
          updateHeaderUI(); // Update UI to show login/signup buttons
          console.log("User logged out successfully.");
          // Optionally redirect to login page after logout
          // window.location.href = "login-signup.html";
        } catch (error) {
          console.error("Error logging out:", error);
          // You might want to display a non-alert message to the user here
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        // Add scroll animation for header
        window.addEventListener("scroll", function () {
          const header = document.querySelector(".header");
          if (window.scrollY > 10) {
            header.style.boxShadow = "var(--shadow)";
            header.style.background = "rgba(255, 255, 255, 0.98)";
          } else {
            header.style.boxShadow = "var(--shadow-sm)";
            header.style.background = "white";
          }
        });

        // Get the buttons and user profile link from the main page
        const loginButton = document.getElementById("login-button");
        const getStartedButton = document.getElementById("get-started-button");
        const logoutButton = document.getElementById("logout-btn");
        const userProfileLink = document.getElementById("user-profile-link");

        if (loginButton) {
          loginButton.addEventListener("click", function () {
            window.location.href = "/login-signup";
          });
        }

        if (getStartedButton) {
          getStartedButton.addEventListener("click", function () {
            window.location.href = "/login-signup?tab=signup";
          });
        }

        if (logoutButton) {
          logoutButton.addEventListener("click", logout);
        }

        // Add click listener to the user profile section
        if (userProfileLink) {
          userProfileLink.addEventListener("click", function () {
            window.location.href = "/activity2"; // Navigate to the activity page
          });
        }

        // Authentication State Observer
        onAuthStateChanged(auth, async (user) => {
          console.log(
            "onAuthStateChanged: Authentication state changed. User:",
            user
          );
          if (user) {
            // User is signed in
            await loadUserProfile(user); // Load profile and update UI
          } else {
            // User is signed out
            currentUserData = null; // Clear user data
            updateHeaderUI(); // Update UI to show login/signup buttons
          }
        });

        // FAQ Accordion functionality (Existing from howitworks.html)
        const faqQuestions = document.querySelectorAll(".faq-question");
        faqQuestions.forEach((question) => {
          question.addEventListener("click", function () {
            this.classList.toggle("active");
            const answer = this.nextElementSibling;
            answer.classList.toggle("show");
          });
        });

        // Set active navigation link for 'Workflow' page
        const currentPath = window.location.pathname.split("/").pop();
        const navLinks = document.querySelectorAll(".nav-links a");
        navLinks.forEach((link) => {
          // Check if the link's href matches the current file name (e.g., 'howitworks.html')
          if (
            link.getAttribute("href") &&
            link.getAttribute("href").endsWith(currentPath)
          ) {
            link.classList.add("active");
          } else {
            link.classList.remove("active");
          }
        });
      });
    </script>
  </body>
</html>
